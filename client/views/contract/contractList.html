<template name="contractList">
  {{> search}}
</template>

<template name="search">
  <h1 class="page-header">Vertragsliste</h1>
  
  Suche: {{> esInput index="contracts" placeholder="Buchtitel / Vertragspartner" }}
  <div class="spacer-20"></div>
  <table class="table table-striped table-condensed">
    <thead>
      <tr>
        <th>Titel</th>
        <th>Autor(en)</th>
        <th>show</th>
        <th>edit</th>
      </tr>
    </thead>
    <tbody>    
      {{#ifEsInputIsEmpty index="contracts"}}
        {{> contractAllList}}
      {{/ifEsInputIsEmpty}}
  
      {{#esEach index="contracts"}}
        {{> contractSearchList}}
      {{/esEach}}
      
      {{> esLoadMoreButton index="contracts"}}
      
      {{#ifEsHasNoResults index="contracts"}}
          <div class="no-results">No results found!</div>
      {{/ifEsHasNoResults}}
    </tbody>
  </table>
    
</template> 

<template name="contractSearchList">
        <tr>
          <td>{{bookTitle}}</td>
          <td>{{#each authors}} {{this}}, {{/each}}</td>
          <td><i><a href="/vertrag/show/{{_id}}">show</a></i></td>
          <td><i><a href="/vertrag/edit/{{_id}}">edit</a></i></td>
        </tr>
</template>

<template name="contractAllList">
      {{#each contracts}}
        <tr>
          <td>{{bookTitle}}</td>
          <td>{{#each authors}} {{this}}, {{/each}}</td>
          <td><i><a href="/vertrag/show/{{_id}}">show</a></i></td>
          <td><i><a href="/vertrag/edit/{{_id}}">edit</a></i></td>
        </tr>
      {{/each}}
</template>